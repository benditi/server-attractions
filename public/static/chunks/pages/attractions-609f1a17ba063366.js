(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{7351:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/attractions",function(){return n(279)}])},4490:function(e,t,n){"use strict";n.d(t,{Z:function(){return Layout},y:function(){return m}});var a=n(5893),i=n(9008),s=n.n(i),r=n(5675),o=n.n(r),l=n(9240),c=n.n(l),d=n(24),u=n.n(d),h=n(1664),g=n.n(h);let m="Next.js Sample Website";function Layout(e){let{children:t,home:n}=e;return(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsxs)(s(),{children:[(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("meta",{name:"description",content:"Learn how to build a personal website using Next.js"}),(0,a.jsx)("meta",{property:"og:image",content:"https://og-image.vercel.app/".concat(encodeURI(m),".png?theme=light&md=0&fontSize=75px&images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg")}),(0,a.jsx)("meta",{name:"og:title",content:m}),(0,a.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,a.jsx)("header",{className:c().header,children:n?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o(),{priority:!0,src:"/images/profile.jpg",className:u().borderCircle,height:144,width:144,alt:""})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g(),{href:"/",children:(0,a.jsx)(o(),{priority:!0,src:"/images/profile.jpg",className:u().borderCircle,height:108,width:108,alt:""})}),(0,a.jsx)("h2",{className:u().headingLg,children:(0,a.jsx)(g(),{href:"/",className:u().colorInherit})})]})}),(0,a.jsx)("main",{children:t})]})}},279:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return FirstPost}});var a=n(5893),i=n(1664),s=n.n(i),r=n(9008),o=n.n(r),l=n(4490),c=n(7294),d=n(6154);let u="//server-attractions.vercel.app/api/";console.log("BASE_URL",u);var h=d.Z.create({withCredentials:!0});let g={get:(e,t)=>(console.log("endpoint",e),ajax(e,"GET",t)),post:(e,t)=>ajax(e,"POST",t),put:(e,t)=>ajax(e,"PUT",t),delete:(e,t)=>ajax(e,"DELETE",t)};async function ajax(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let a=await h({url:"".concat(u).concat(e),method:t,data:n,params:"GET"===t?n:null});return a.data}catch(a){throw console.log("Had Issues ".concat(t,"ing to the backend, endpoint: ").concat(e,", with data: ").concat(n)),console.dir(a),a.response&&401===a.response.status&&(sessionStorage.clear(),window.location.assign("/")),a}}var m=n(1974);let p={query,get:function(e,t){return query(e).find(e=>e.Id===t)},post:function(e,t){t.Id=_makeId();let n=query(e);return n.push(t),_save(e,n),t},put:function(e,t){let n=query(e);if(!n.length)return console.log("no length"),_save(e,[t]),t;let a=n.findIndex(e=>e.Id===t.Id);return -1===a?(console.log("idx -1"),_save(e,[...n,t])):(console.log("idx regular",a),n.splice(a,1,t),_save(e,n)),t},remove:function(e,t){let n=query(e),a=n.findIndex(e=>e.Id===t);n.splice(a,1),_save(e,n)},postMany:function(e,t){let n=query(e);return t=t.map(e=>({...e,Id:_makeId()})),n.push(...t),_save(e,n),n},attractionKey:"attractive"};function query(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],JSON.parse(localStorage.getItem(e))||[]}function _save(e,t){localStorage.setItem(e,JSON.stringify(t))}function _makeId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function FirstPost(){let[e,t]=(0,c.useState)(null),toggleFavourite=(n,a)=>{let i=e.findIndex(e=>e.Id===a),s=[...e];s[i].isFavourite=!n,t(s),p.put(p.attractionKey,{Id:a,isFavourite:!n})};return(0,c.useEffect)(()=>{let e=p.query(p.attractionKey);(async function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(async n=>{let{attractions:a}=await g.get("attraction");t(a.map(t=>{var a;return{...t,distance:(0,m.c)({currentLocation:{lat1:n.coords.latitude,lon1:n.coords.longitude},destinationLocation:{lat2:t.Y,lon2:t.X}}),isFavourite:!!e&&(null===(a=e.find(e=>e.Id===t.Id))||void 0===a?void 0:a.isFavourite)}}).sort((e,t)=>e.distance-t.distance))},null,{enableHighAccuracy:!0})})()},[]),(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(o(),{children:(0,a.jsx)("title",{children:"Nearest Attractions"})}),(0,a.jsx)("h1",{children:"האטרקציות הקרובות"}),(0,a.jsx)("h2",{children:(0,a.jsx)(s(),{href:"/",children:"חזרה לבית"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"table table-fixed w-full",children:[(0,a.jsx)("div",{className:"thead",children:(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"td p-3 font-bold",children:"מס' מזהה"}),(0,a.jsx)("div",{className:"td p-3 font-bold",children:"שם"}),(0,a.jsx)("div",{className:"td p-3 font-bold",children:"כתובת"}),(0,a.jsx)("div",{className:"td p-3 font-bold",children:"שעות פתיחה"}),(0,a.jsx)("div",{className:"td p-3 font-bold",children:'מרחק (בק"מ)'}),(0,a.jsx)("div",{className:"td attr-link p-3 font-bold",children:"לינק לאתר"}),(0,a.jsx)("div",{className:"td p-3 font-bold"})]})}),(null==e?void 0:e.length)?e.map(e=>(0,a.jsxs)("div",{className:"tr",children:[(0,a.jsx)("div",{className:"td p-3",children:e.Id}),(0,a.jsx)("div",{className:"td p-3",children:e.Name}),(0,a.jsx)("div",{className:"td p-3",children:e.Address}),(0,a.jsx)("div",{className:"td p-3",children:null==e?void 0:e.Opening_Hours}),(0,a.jsx)("div",{className:"td p-3",children:Math.round(e.distance/1e3)}),(0,a.jsxs)("div",{className:"td p-3",children:[" ",(0,a.jsx)("a",{href:null==e?void 0:e.URL,target:"_blank",rel:"noreferrer noopener",children:null==e?void 0:e.URL})," "]}),(0,a.jsxs)("div",{className:"td p-3",children:[(0,a.jsxs)("button",{className:e.isFavourite?"rounded-2 bg-pink":"rounded-2 bg-aquamarine",onClick:()=>{toggleFavourite(e.isFavourite,e.Id)},children:[" ",e.isFavourite?"הסר ממועדפים":"הוסף למועדפים"]})," "]})]},e.Name)):null]})})]})}},1974:function(e,t){"use strict";t.c=void 0,t.c=function(e){var t=e.currentLocation,n=e.destinationLocation,a=t.lat1,i=t.lon1,s=n.lat2,r=n.lon2,o=(s-a)*Math.PI/180,l=(r-i)*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(a*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371e3*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}},9240:function(e){e.exports={container:"layout_container__FUycR",header:"layout_header__SFlEE",backToHome:"layout_backToHome__D9QFr"}},24:function(e){e.exports={heading2Xl:"utils_heading2Xl__oxFoJ",headingXl:"utils_headingXl__zlq1q",headingLg:"utils_headingLg__RYtYb",headingMd:"utils_headingMd__XQE5B",borderCircle:"utils_borderCircle__zmKqF",colorInherit:"utils_colorInherit__Jz9NS",padding1px:"utils_padding1px__Ov2XA",list:"utils_list__zR_Au",listItem:"utils_listItem__6FEiz",lightText:"utils_lightText__B_gv3"}}},function(e){e.O(0,[247,154,774,888,179],function(){return e(e.s=7351)}),_N_E=e.O()}]);